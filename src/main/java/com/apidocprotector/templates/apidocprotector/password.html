<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>ApiDoc Protector</title>
    <style th:text="${apidoc_protector_theme}"></style>
</head>

<body id="body_password">
    <div id="right-side">
        <p id="apidoc-protector-icon">&#9661;</p>
        <h3>APIDOC PROTECTOR</h3>
        <p style="color: #676767;">Powered by Huntercodexs &copy; 2022</p>
    </div>
    <div id="left-side">
        <h5>Password Request</h5>
        <form method='POST' th:action="${apidoc_protector_target}" enctype='application/x-www-form-urlencoded'>

            <p class="title-field">Email</p>
            <p>
                <input type='text' name='email' id='email' value="" />
            </p>

            <p id="p-button">
                <input type='submit' id='bt-password' value='Send' />
            </p>
            <p id="post-message" th:text="${apidoc_protector_password}"></p>
        </form>
    </div>
        <script>
        window.onload = function() {
            (function(window) {
                'use strict';

                let x_back_denied = {

                    //globals
                    version: '0.0.1',
                    history_api: typeof history.pushState !== 'undefined',

                    init: function() {
                        window.location.hash = '#x-to-lock';
                        x_back_denied.configure();
                    },

                    configure: function() {
                        if (window.location.hash === '#x-to-lock') {
                            if (this.history_api) {
                                history.pushState(null, '', '#x-padlock');
                            } else {
                                window.location.hash = '#x-padlock';
                            }
                        }
                        x_back_denied.checkCompat();
                        x_back_denied.hasChanged();
                    },

                    checkCompat: function() {
                        if (window.addEventListener) {
                            window.addEventListener("hashchange", x_back_denied.hasChanged, false);
                        } else if (window.attachEvent) {
                            window.attachEvent("onhashchange", x_back_denied.hasChanged);
                        } else {
                            window.onhashchange = x_back_denied.hasChanged;
                        }
                    },

                    hasChanged: function() {
                        if (window.location.hash === '#x-to-lock') {
                            window.location.hash = '#x-padlock';
                            alert("Operation not allowed");
                        }
                    }
                };

                x_back_denied.init();

            }(window));
        }
    </script>
</body>
</html>
